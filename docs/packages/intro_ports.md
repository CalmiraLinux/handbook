# Введение в порты

Порты - относительно молодой (в CalmiraLinux), но, в тоже время, очень удобный инструмент управления ПО. На данный момент, с помощью портов можно только устанавливать и удалять ПО, но в скором времени будут доступны новые функции.

## Введение

Система портов находится в `/usr/ports`. Всё ПО разделено на категории:

* `base` - базовые порты, входящие в минимальную поставку дистрибутива;
* `console` - консольные утилиты;
	* `editors` - консольные текстовые редакторы;
* `kernel` - ядро и его компоненты;
* `multimedia` - мультимедиа утилиты;
* `network` - сетевые утилиты;
	* `browsers` - браузеры и менеджеры скачивания;
	* `connecting` - утилиты для подключения к сети;
* `optional` - дополнительный софт, не вошедший в базовую поставку дистрибутива, но который может понадобиться после установки системы;
	* `libs` - библиотеки;
* `programming` - программирование: языки, доп. компиляторы (не вошедшие в минимальную поставку дистрибутива), модули, предназначенные для разработки библиотеки.
	* `python-modules` - модули для ЯП Python. Часть используются в составе некоторых пакетов;
* `xorg` - сервер X и другое ПО, такое как оконные менеджеры и рабочие окружения;
	* `x11-de` - рабочие окружения для X11;
	* `x11-minimal` - X-сервер и основные утилиты для него;
		* `xlibs` - дополнительные библиотеки Xorg, которые не входят в минимальную поставку Xorg, но которые могут пригодиться при сборке других пакетов (таких как рабочих окружений);
		* `xdrivers` - драйвера Xorg;
	* `x11-wm` - оконные менеджеры Xorg;

В каждой категории несколько подкаталогов с портом программы. Первые версии портов включают в себя только файл `install` с инструкциями по сборке, либо ещё `info` с информацией о пакете. В новых портах вместо `info` используется файл `config.json`, который предназначается ещё и для занесения пакета в базу данных `port-utils`.

## Установка программ из портов

Для того, чтобы установить какую-либо программу из порта, нужно выполнить:

```bash
# Переход в нужную директорию
cd /usr/ports/$КАТЕГОРИЯ/$ПРОГРАММА

# Выполнение инструкций сборки и установки
./install
```

Так же в директории с портом могут находиться следующие файлы:

* `install_doc.sh` - для установки дополнительной документации;
* `setup.html` - инструкции по дальнейшей настройке пакета, которые трудно автоматизировать (нужно активное участие пользователя/администратора для выбора и изменения параметров, например), либо автоматизировать невозможно/не рекомендуется. Пригоден для открытия во всех известных браузерах.
* `setup.sh` (не путать с предыдущим `setup.html`!) - содержит инструкции для автоматизированной настройки пакета после установки для КОНКРЕТНОГО пользователя, от чьего имени запускается этот скрипт. Обычно создаёт нужные директории и конфигурационные файлы в домашней папке (`~/`) того пользователя.
* `info` (устаревший) - содержит описание пакета и его версию. На данный момент заменён на `config.json`, предоставляющий более обширные данные в удобном формате json. Так же используется для добавления пакета в базу данных `port-utils`.

Всё ПО из портов собирается из исходного кода. В некоторых случаях сборка может занять довольно много времени (так, например, пакет `gcc` на очень слабом железе может собираться до трёх дней). Однако, у сборки очень много преимуществ:

1. Возможность оптимизации программы под своё железо;
2. Больший контроль при установке;
3. Выбор нужных функций и удаление ненужных (если программа это поддерживает).

Иногда пакеты предоставляют к установке дополнительную документацию. Она не всем нужна, поэтому мы оставили в портах возможность выбора пользователем: ставить её или нет. Система портов всегда спрашивает пользователя об этом. Если вы отказались от установки такой документации в будущем, но она вам пригодилась позже - перейдите в директорию с портом и выполните:

```bash
chmod +x install_doc.sh
./install_doc.sh
```

Этими командами вы установите документацию пакета.